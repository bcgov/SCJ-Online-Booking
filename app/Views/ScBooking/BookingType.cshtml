@inject SelectListService SelectListService

@model SCJ.Booking.MVC.ViewModels.ScBookingTypeViewModel

@{
    ViewData["Title"] = "BookingType";

    if (Model.AvailableConferenceTypeIds.Count == 1)
    {
        Model.HearingTypeId = Model.AvailableConferenceTypeIds.First();
    }
}

<div class="body-content--inner">
    <div class="d-flex justify-content-between steps-link">
        <h5>4 steps to complete your booking</h5>
        <h6><a href="/scjob/booking/sc">Cancel</a></h6>
    </div>
    <hr />
    <h6>Step 2</h6>
    <h2>Choose Your Booking Type</h2>

    <form method="post">
        @for (int i = 0; i < Model.AvailableConferenceTypeIds.Count; i++)
        {
            @Html.HiddenFor(m => m.AvailableConferenceTypeIds[i])
        }

        <div>
            <div class="uppercase-sm">File Number: @Model.SessionInfo.FileNumber</div>
            <h5 style="margin-bottom: 4px">@Model.SessionInfo.SelectedCourtFile?.styleOfCause</h5>
            <p>@Model.SessionInfo.SelectedCourtClassName</p>
        </div>

        <div class="row no-gutters">
            <div class="form-group booking-type-selection bg-white rounded p-3 p-sm-4">
                <h6 class="form-section-label">Choose your booking type</h6>

                <div class="booking-types check-group">
                    @foreach (var bookingType in Model.AvailableBookingTypes)
                    {
                        <label>
                            @{
                                // translate between hearing type IDs and titles
                                var hearingTypeId = @ScHearingType.HearingTypeIdMap[bookingType];
                                var hearingTypeName = @ScHearingType.HearingTypeNameMap[hearingTypeId];
                            }

                            <input asp-for="HearingTypeId" type="radio" name="HearingTypeId" value="@hearingTypeId" />
                            @hearingTypeName
                        </label>
                    }
                </div>

                <div class="row no-gutters pb-3 pt-0">
                    <span asp-validation-for="HearingTypeId" class="text-danger"></span>
                </div>

                <p>
                    <a href="https://www.bccourts.ca/supreme_court/scheduling" target="_blank" rel="noopener">Contact
                        the applicable Supreme Court scheduling office</a>
                    <i class="fa fa-external-link-alt"></i> by telephone for conference types not listed.
                </p>

                <div id="trial-additional-fields" class="mt-4" style="display: none;">
                    <div class="form-group mb-5">
                        <label for="EstimatedTrialLength" class="form-section-label">
                            Estimated length of trial
                        </label>

                        <div>
                            <input class="mr-2 form-control d-inline-block EstimatedTrialLength" type="number" min="1"
                                asp-for="EstimatedTrialLength" />
                            <span>days</span>

                            <div class="mt-2">
                                <span asp-validation-for="EstimatedTrialLength" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group btn-radio-group mb-5">
                        <h6 class="form-section-label">
                            Is the trial taking place in the home registry?
                        </h6>

                        <div class="check-group">
                            <label>
                                <input id="IsHomeRegistry--Yes" asp-for="IsHomeRegistry" type="radio"
                                    name="IsHomeRegistry" value="true">
                                Yes
                            </label>

                            <label>
                                <input id="IsHomeRegistry--No" asp-for="IsHomeRegistry" type="radio"
                                    name="IsHomeRegistry" value="false">
                                No
                            </label>
                        </div>

                        <div>
                            <span asp-validation-for="IsHomeRegistry" class="text-danger"></span>
                        </div>
                    </div>

                    <div id="different-place-of-trial" class="form-group btn-radio-group mb-5">
                        <h6 class="form-section-label">
                            Do you have an entered court order changing the place of trial or is a different place of
                            trial stated on the initiating documents (e.g. Notice of Civil Claim, Notice of Family
                            Claim)?
                        </h6>

                        <div class="check-group">
                            <label>
                                <input id="IsLocationChangeFiled--Yes" asp-for="IsLocationChangeFiled" type="radio"
                                    name="IsLocationChangeFiled" value="true">
                                Yes
                            </label>

                            <label>
                                <input id="IsLocationChangeFiled--No" asp-for="IsLocationChangeFiled" type="radio"
                                    name="IsLocationChangeFiled" value="false">
                                No
                            </label>
                        </div>

                        <div>
                            <span asp-validation-for="IsLocationChangeFiled" class="text-danger"></span>
                        </div>
                    </div>

                    <div id="trial-location-warning" class="alert alert-danger" role="alert">
                        <i class="fas fa-ban"></i>
                        You must have an entered court order changing the place of trial or have a different place of
                        trial
                        stated on the initiating document (eg. Notice of Civil Claim, Notice of Family Claim).
                    </div>

                    <div id="trial-location" class="form-group mb-5">
                        <label for="TrialLocation" class="form-section-label">
                            Where will the trial be held?
                        </label>

                        <select asp-for="TrialLocationRegistryId" asp-items="SelectListService.SupremeLocations"
                            class="form-control TrialLocation" id="TrialLocation">
                            <option value="-1">-- Pick a registry --</option>
                        </select>

                        <div>
                            <span asp-validation-for="TrialLocationRegistryId" class="text-danger"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row no-gutters">
            <div class="col-6 col-md-8 d-flex align-items-center text-link">
                <span>
                    <i class="fas fa-long-arrow-alt-left"></i>
                    <a href="select-case">Step 1: Find the Case for Your Booking</a>
                </span>
            </div>
            <div class="col-6 col-md-4">
                <button type="submit" class="btn btn-primary btn-block">
                    Show Availability
                </button>
            </div>
        </div>

    </form>
</div>
